# OSI模型各层功能
## 物理层Physical
机械，电气，功能，规程的特性

以 比特流 为单位
## 数据链路层Data Link
将有差错的物理链路转化为没有错误的数据链路

以 数据帧 为单位，接收方对帧及逆行校验并应答，发送方对错误帧进行重发

流量控制：利用应答帧来协调收发双方的数据传输速率

## 网络层 Network
路由和拥塞控制：确定分组如何从源端到目的端

网络互联： 分组需要跨越多个网络时，可能：

1、不同网络，寻址方式不同

2、分组长度不同，无法接受

3、协议不同

## 传输层 Transport 'Socket'
`第一个端到端的层` 

不需要考虑下面的网络层是什么样子的

传输层以下：协议是每一台机器和它相邻机器的协议，不是源端机器与目标机器间的协议

传输层：源端机器可以用报文直接与目标机器程序对话

提供面向连接、无连接以及安全连接服务 SSL

IPSec（AH/ESP）->VPN

### 面向连接服务与无连接服务
#### 面向连接服务
建立连接 数据传输  连接释放

#### 三次请求
A对B发送请求 ，B对A做确认，A对B再一次确认

#### 无连接服务
两个机器不用事先建立连接

不可靠服务。“尽力而为”，不管有没有发到直接发

## 会话层Session
管理各个机器间进程间会话

进程-进程层

## 表示层（靠近用户）Presentatiom

提供数据或信息语法的表示变化，数据表示与抽象数据表示之间的变化，数据的加密/解密

## 用户层Application
常见的应用服务：域名服务，文件传输，电子邮件，虚拟终端

## 总结
低三层设计到通信子网的数据传输，是端系统与通信子网边界的事情

高四层是端到端的层次

## OSI数据传输过程
```
数据传入到应用层，应用层对数据添加本层的控制信息头部AH，传到下一层表示层

每一层依次添加控制信息并向下传

传到物理层后，发送到目标机器

目标机器从物理层向应用层传并且去掉控制信息
```
#### 控制信息不一定在头部，也可能在尾部

### 较大的数据可能会被分割成小块，被每一层添加控制信息

### 层数多了，每一层都添加控制信息，原本的数据变大

## 问题
1、过于复杂

2、协议制作过期过长

3、没有商业驱动力

# TCP/IP模型
## 4层结构： 

应用层（应用层、表示层、会话层）-》各种服务

运输层（传输层）-》 运输服务 可靠/不可靠

网际层（网络层） -》

网络接口层（物理层、数据链路层）

## 沙漏计时形状的TCP/IP
两头大，中间小

上面大：各种服务可以化为IP地址

下面大：可以连接到各种网络上

中间小：IP协议起到核心作用

应用层和网络接口层通过IP为核心

# 应用层
FTP, DNS, TLENET SMTIP

# 传输层
TCP

UCP(不可靠)

# 网际层

分组独立地从信源到信宿

网际层是TCP/IP的核心，网际层上的协议成为IP协议

# 网络接口层

# 第二章 物理层
源系统-传输系统-目的系统

信源-信道-信宿

Data(独立) Information（个体间的联系） Knowledge（添加规则，可以推理） 信号（数据的电气或电磁对的表现）

调制：基于一个连续的函数（正弦/余弦），带入数字信号，进行调频/调幅/调相

解调：采样-》量化为整数-》编码。PCM方式将模型信号化为数字信号

```
模拟数据 放大调整器 模拟信号  --> 早期电话系统

模拟数字 PCM编码器 数字信号  --> 现代电话

数字数据 调制器 模拟信号  -->  光纤

数字数据 数字发送器 数字信号  --> 信号转换设备
```

## 数据通信中的几个指标（**计算题**）
### 信号传输速率
#### 信道的最高码元传输速率
传输过程中存在失真和干扰，实际信道带宽受限，有噪声，干扰和失真

码元传输速率越高+传输的越远，信道输出端的波形失真 越大。因此码元传输速率与传输距离相互矛盾

单位： 波特(baud) 每秒发送的码元数目  1波特=每秒传输一码元信号

信号传输率： 波特率

##### 理想低通信道： 信号的所有低频分量，只要频率不超过一个上限，都能不失真的通过信道
奈氏准则：
最高码元传输速率： 2W baud  (w是理想低通信道的带宽，单位为赫兹)




##### 理想带通信道： 信号的频率在某个范围F1~F2,在这之内都能不失真通过
奈氏准则：
最高码元传输速率为 W baud

##### 带宽：信道所能传输的电信号的频率范围，单位为赫兹

### 数据传输速率
单位： 比特/秒 

每秒能传输的二进制位数

数据传输率： 比特率

如果码元的状态数为2，一个状态为0， 一个状态为1，则 比特率=波特率

若码元状态数为4， 比特率=2*波特率

```
码元状态数为N，比特率与波特率之间的关系：**s=Blog2(N)**
```

### 信道容量
信道的极限信息数据传输速率


#### 无噪声信道
```
对于无噪声低通信道，若信道带宽为H，码元状态数为N

根据尼奎斯特定理： B= 2H(BAUD)

信道的最大数据传输速率： S=B*LOG2(N)

所以有： S=2H*LOG2(H)
```

无噪声信道N可以取任意值，所以无噪声信道容量是无限的

#### 有噪声信道

香农提出 若带宽为H的有噪声信道，信道容量为
```
C= Hlog2(1+S/N)(bps)[S为信号功率，N为噪声功率，S/N为信道信噪比]

信噪比单位为分贝（dB）：dB=10 log10(S/N)
```

### 带宽(bandwidth)
一个特定的信号由不同的频率组成

最常用的带宽单位：
kb/s:10^3 ;  Mb/s=10^6 ; Gb/s= 10^9 ; Tb/s: 10^12
### 时延

### 误码率




